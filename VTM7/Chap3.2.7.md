### 3.2.7    Intra chroma partitioning and prediction restriction

Since the dual tree in intra picture allows to apply different partitioning in the chroma coding tree compared to the luma coding tree, the dual tree introduces longer coding pipeline and the QTBT MinQTSizeC value range and MinBtSizeY and MinTTSizeY in chroma tree allow small chroma blocks such as $2x2$, 4x2, and 2x4. It provides difficulties in practical decoder design. Moreover, several prediction modes such as CCLM, planar and angular mode needs multiplication. In order to alleviate the above mentioned issues, small chroma block sizes (2x2/2x4/4x2) are restricted in dual tree as a partitioning restriction. 

In typical hardware video encoders and decoders, processing throughput drops when a picture has more small intra blocks because of sample processing data dependency between neighbouring intra blocks. The predictor generation of an intra block requires top and left boundary reconstructed samples from neighbouring blocks. Therefore, intra prediction has to be sequentially processed block by block.

In HEVC, the smallest intra CU is 8x8 luma samples. The luma component of the smallest intra CU can be further split into four 4x4 luma intra prediction units (Pus), but the chroma components of the smallest intra CU cannot be further split. Therefore, the worst case hardware processing throughput occurs when 4x4 chroma intra blocks or 4x4 luma intra blocks are processed. In VVC, in order to improve worst case throughput, chroma intra CBs smaller than 16 chroma samples is disallowed by constraining the partitioning of chroma intra CBs. In single coding tree, a smallest chroma intra prediction unit (SCIPU) is defined as a coding tree node whose chroma block size is larger than or equal to 16 chroma samples and has at least one child luma block smaller than 64 luma samples. It is required that in each SCIPU, all CBs are inter, or all CBs are non-inter, i.e, either intra or intra block copy (IBC). In case of a non-inter SCIPU, it is further required that chroma of the non-inter SCIPU shall not be further split and luma of the SCIPU is allowed to be further split. In this way, the smallest chroma intra CB size is 16 chroma samples, and 2x2, 2x4, and 4x2 chroma CBs are removed. In addition, chroma scaling is not applied in case of a non-inter SCIPU. Here, no additional syntax is signalled, and whether a SCIPU is non-inter can be derived by the prediction mode of the first luma CB in the SCIPU. The type of a SCIPU is inferred to be non-inter if the current slice is an I-slice or the current SCIPU has a 4x4 luma partition in it after further split one time (because no inter 4x4 is allowed in VVC); otherwise, the type of the SCIPU (inter or non-inter) is indicated by one flag before parsing the Cus in the SCIPU. In addition, a restriction on picture size is considered to avoid 2x2/2x4/4x2 intra chroma blocks at the corner of pictures by considering the picture width and height to be multiple of max (8, MinCbSizeY). 